<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Course Grading System - Dashboard</title>
    <link rel="stylesheet" href="Grade.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="dashboard-page">
    <div class="background-globes">
        <div class="globe globe-1"></div>
        <div class="globe globe-2"></div>
        <div class="globe globe-3"></div>
    </div>

    <div class="dashboard-container">
        <div class="dashboard-header">
            <div class="header-icon">
                <i class="fa-solid fa-graduation-cap"></i>
            </div>
            <h1 class="dashboard-title">University Grading System</h1>
            <p class="dashboard-subtitle">Select your university to access the course grade calculator</p>
        </div>

        <div class="dashboard-card">

            
            <div class="university-selector">
                <label>
                    <i class="fa-solid fa-school"></i>
                    Select University
                </label>
                <div class="custom-dropdown" id="universityDropdown">
                    <div class="dropdown-selected" onclick="toggleDropdown()">
                        <span id="selectedName">-- Choose a University --</span>
                        <i class="fa-solid fa-chevron-down dropdown-arrow"></i>
                    </div>
                    <div class="dropdown-options-container" id="dropdownOptions">
                        <div class="dropdown-search">
                            <div class="dropdown-search-wrapper">
                                <i class="fa-solid fa-magnifying-glass"></i>
                                <input type="text" id="uniSearch" placeholder="Search university..." oninput="filterUniversities()">
                            </div>
                            <div class="go-to-calc" onclick="goToCalculator()">
                                <span>Go to Calculator</span>
                                <i class="fa-solid fa-arrow-right"></i>
                            </div>
                        </div>
                        <ul class="dropdown-options-list">
                            <li data-value="Ahsanullah International University Bangladesh" onclick="selectUniversity('Ahsanullah International University Bangladesh', 'Ahsanullah International University Bangladesh')">Ahsanullah International University Bangladesh</li>
                            <li data-value="American International University Bangladesh" onclick="selectUniversity('American International University Bangladesh', 'American International University Bangladesh')">American International University Bangladesh</li>
                            <li data-value="Bangladesh Rural Advancement Committee University" onclick="selectUniversity('Bangladesh Rural Advancement Committee University', 'Bangladesh Rural Advancement Committee University')">Bangladesh Rural Advancement Committee University</li>
                            <li data-value="Bangladesh University of Business & Technology" onclick="selectUniversity('Bangladesh University of Business & Technology', 'Bangladesh University of Business & Technology')">Bangladesh University of Business & Technology</li>
                            <li data-value="BGMEA University of Fashion and Technology" onclick="selectUniversity('BGMEA University of Fashion and Technology', 'BGMEA University of Fashion and Technology')">BGMEA University of Fashion and Technology</li>
                            <li data-value="Daffodil International University" onclick="selectUniversity('Daffodil International University', 'Daffodil International University')">Daffodil International University</li>
                            <li data-value="Dhaka University" onclick="selectUniversity('Dhaka University', 'Dhaka University')">Dhaka University</li>
                            <li data-value="East West University" onclick="selectUniversity('East West University', 'East West University')">East West University</li>
                            <li data-value="Green University" onclick="selectUniversity('Green University', 'Green University')">Green University</li>
                            <li data-value="Independent University Bangladesh" onclick="selectUniversity('Independent University Bangladesh', 'Independent University Bangladesh')">Independent University Bangladesh</li>
                            <li data-value="International University of Business Agriculture & Technology" onclick="selectUniversity('International University of Business Agriculture & Technology', 'International University of Business Agriculture & Technology')">International University of Business Agriculture & Technology</li>
                            <li data-value="Islamic University of Technology" onclick="selectUniversity('Islamic University of Technology', 'Islamic University of Technology')">Islamic University of Technology</li>
                            <li data-value="Jahangirnagar University" onclick="selectUniversity('Jahangirnagar University', 'Jahangirnagar University')">Jahangirnagar University</li>
                            <li data-value="North South University" onclick="selectUniversity('North South University', 'North South University')">North South University</li>
                            <li data-value="Northern University Bangladesh" onclick="selectUniversity('Northern University Bangladesh', 'Northern University Bangladesh')">Northern University Bangladesh</li>
                            <li data-value="Shanto Mariam University of Creative Technology" onclick="selectUniversity('Shanto Mariam University of Creative Technology', 'Shanto Mariam University of Creative Technology')">Shanto Mariam University of Creative Technology</li>
                            <li data-value="Southeast University" onclick="selectUniversity('Southeast University', 'Southeast University')">Southeast University</li>
                            <li data-value="United International University" onclick="selectUniversity('United International University', 'United International University')">United International University</li>
                            <li data-value="University of Liberal Arts Bangladesh" onclick="selectUniversity('University of Liberal Arts Bangladesh', 'University of Liberal Arts Bangladesh')">University of Liberal Arts Bangladesh</li>
                            <li data-value="Uttara University" onclick="selectUniversity('Uttara University', 'Uttara University')">Uttara University</li>
                            <li data-value="Manarat International University" onclick="selectUniversity('Manarat International University', 'Manarat International University')">Manarat International University</li>
                            <li data-value="City University" onclick="selectUniversity('City University', 'City University')">City University</li>
                            <li data-value="Gono Bishwabidyalay" onclick="selectUniversity('Gono Bishwabidyalay', 'Gono Bishwabidyalay')">Gono Bishwabidyalay</li>
                        </ul>
                    </div>
                </div>
                <input type="hidden" id="selectedUniversityValue" value="">
            </div>

            <button class="dashboard-btn" onclick="goToCalculator()">
                <span>Go to Calculator</span>
                <i class="fa-solid fa-arrow-right"></i>
            </button>

            <button class="dashboard-btn btn-cgpa" onclick="showUpcomingModal()">
                <span>CGPA Calculator</span>
                <i class="fa-solid fa-calculator"></i>
            </button>

            <div class="dashboard-features">
                <div class="feature-item">
                    <i class="fa-solid fa-calculator"></i>
                    <span>Grade Calculator</span>
                </div>
                <div class="feature-item">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>Grade Targets</span>
                </div>
                <div class="feature-item">
                    <i class="fa-solid fa-trophy"></i>
                    <span>Achievement Tracking</span>
                </div>
            </div>
        </div>

        <div class="dashboard-footer">
            <p class="footer-info">
                <i class="fa-solid fa-circle-info"></i>
                Calculate your course grades with precision and track your academic progress
            </p>
            <div class="developer-credit">
                <span>Designed & Developed by</span>
                <span class="dev-name">K. M. Fathum Mubin Sachcha</span>
            </div>
            <div class="dashboard-disclaimer">
                This is an independent, unofficial student resource and is not affiliated with or endorsed by any university. 
                Grading information is based on publicly available sources and may change.
            </div>
        </div>
    </div>

    <!-- Under Construction Modal -->
    <div class="modal-overlay" id="constructionModal" onclick="closeConstructionModal()">
        <div class="modal-construction" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeConstructionModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <div class="construction-icon">
                <i class="fa-solid fa-triangle-exclamation"></i>
            </div>
            <h2>Under Construction</h2>
            <p class="modal-message">This university's grading system is currently being configured.</p>
            <p class="modal-submessage">The grade distribution has not been properly set up yet. Please check back later or select one of our completed universities.</p>
            
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="showAvailableUniversities()">
                    <i class="fa-solid fa-list-check"></i>
                    <span>View Available Universities</span>
                </button>
                <button class="modal-btn" onclick="closeConstructionModal()">
                    <span>Got it</span>
                    <i class="fa-solid fa-check"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Available Universities Modal -->
    <div class="modal-overlay" id="availableModal" onclick="closeAvailableModal()">
        <div class="modal-available" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeAvailableModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <div class="available-icon">
                <i class="fa-solid fa-circle-check"></i>
            </div>
            <h2>Available Universities</h2>
            <p class="modal-message">These universities are fully configured and ready to use!</p>
            
            <div class="completed-universities">
                <div class="uni-carousel" id="uniCarousel">
                    <!-- Universities will be dynamically populated -->
                </div>
                <div class="carousel-dots" id="carouselDots">
                    <!-- Dots will be dynamically populated -->
                </div>
            </div>
            
            <button class="modal-btn" onclick="closeAvailableModal()">
                <span>Back to Dashboard</span>
                <i class="fa-solid fa-arrow-left"></i>
            </button>
        </div>
    </div>

    <!-- Upcoming Feature Modal -->
    <div class="modal-overlay" id="upcomingModal" onclick="closeUpcomingModal()">
        <div class="modal-construction" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeUpcomingModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <div class="construction-icon" style="background: rgba(109, 0, 26, 0.2); color: #6D001A;">
                <i class="fa-solid fa-rocket"></i>
            </div>
            <h2>New feature is upcoming!</h2>
            <p class="modal-message">Under construction.</p>
            <p class="modal-submessage">Please wait until the new feature is added. We are working hard to bring you the best CGPA calculation tools.</p>
            
            <div class="modal-buttons">
                <button class="modal-btn" style="background: linear-gradient(135deg, #6D001A, #8B112B);" onclick="proceedToCGPA()">
                    <span>Proceed Anyway</span>
                    <i class="fa-solid fa-arrow-right"></i>
                </button>
                <button class="modal-btn secondary" onclick="closeUpcomingModal()">
                    <span>Got it</span>
                    <i class="fa-solid fa-check"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        function toggleDropdown() {
            const options = document.getElementById('dropdownOptions');
            const arrow = document.querySelector('.dropdown-arrow');
            options.classList.toggle('show');
            arrow.classList.toggle('rotate');
            
            if (options.classList.contains('show')) {
                document.getElementById('uniSearch').focus();
            }
        }

        function selectUniversity(value, name) {
            document.getElementById('selectedName').textContent = name;
            document.getElementById('selectedUniversityValue').value = value;
            document.getElementById('selectedName').classList.add('selected');
            
            toggleDropdown();
        }

        function filterUniversities() {
            const input = document.getElementById('uniSearch');
            const filter = input.value.toLowerCase();
            const li = document.querySelectorAll('.dropdown-options-list li');

            li.forEach(item => {
                const text = item.textContent || item.innerText;
                if (text.toLowerCase().indexOf(filter) > -1) {
                    item.style.display = "";
                } else {
                    item.style.display = "none";
                }
            });
        }

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.dropdown-selected') && !event.target.matches('.dropdown-selected *') && !event.target.matches('#uniSearch')) {
                const options = document.getElementById('dropdownOptions');
                const arrow = document.querySelector('.dropdown-arrow');
                if (options.classList.contains('show')) {
                    options.classList.remove('show');
                    arrow.classList.remove('rotate');
                }
            }
        }

        function goToCalculator() {
            const selectedUniversity = document.getElementById('selectedUniversityValue').value;
            const dropdown = document.getElementById('universityDropdown');
            
            if (!selectedUniversity) {
                showToast('Please select a university first!');
                dropdown.classList.add('error-shake');
                setTimeout(() => dropdown.classList.remove('error-shake'), 500);
                return;
            }
            
            // List of completed universities
            const completedUniversities = [
                'North South University',
                'Daffodil International University',
                'Gono Bishwabidyalay',
                'United International University',
                'Bangladesh University of Business & Technology',
                'Manarat International University',
                'American International University Bangladesh',
                'East West University'
            ];
            
            // Check if university is completed
            if (!completedUniversities.includes(selectedUniversity)) {
                showConstructionModal();
                return;
            }
            
            // Add loading animation
            const btn = document.querySelector('.dashboard-btn');
            btn.classList.add('loading');
            
            // Navigate to the selected university's calculator page
            setTimeout(() => {
                // To make the provided snippet syntactically correct and functional,
                // we need to define 'university' based on 'selectedUniversity'.
                // Assuming 'selectedUniversity' directly corresponds to the folder name.
                const university = { folder: selectedUniversity }; 

                if (university) {
                    // Update: path needs to go up two levels since index.html is now in X_Calculator/Grade_Calculator
                    window.location.href = '../../' + university.folder + '/Course.html';
                } else {
                    // This else block was incomplete in the provided snippet.
                    // For syntactic correctness, it's either removed or completed.
                    // Given the context, it's unlikely to be reached if university is derived from selectedUniversity.
                    // Keeping it empty to match the spirit of the provided snippet's structure.
                }
            }, 300);
        }

        function showConstructionModal() {
            const modal = document.getElementById('constructionModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }

        function closeConstructionModal() {
            const modal = document.getElementById('constructionModal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        function showAvailableUniversities() {
            // Close construction modal first
            closeConstructionModal();
            // Show available universities modal after a brief delay
            setTimeout(() => {
                const modal = document.getElementById('availableModal');
                modal.style.display = 'flex';
                setTimeout(() => {
                    modal.classList.add('show');
                    initializeCarousel();
                }, 10);
            }, 350);
        }

        function closeAvailableModal() {
            const modal = document.getElementById('availableModal');
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
                stopCarousel();
            }, 300);
        }

        function showUpcomingModal() {
            const modal = document.getElementById('upcomingModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }

        function closeUpcomingModal() {
            const modal = document.getElementById('upcomingModal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        function proceedToCGPA() {
            closeUpcomingModal();
            setTimeout(() => {
                window.location.href = '../CGPA_Calculator/CGPA.html';
            }, 300);
        }

        let carouselInterval;
        let currentSlide = 0;
        const universities = [
            'Daffodil International University',
            'North South University',
            'East West University',
            'United International University',
            'American International University Bangladesh',
            'Bangladesh University of Business & Technology',
            'Manarat International University',
            'Gono Bishwabidyalay'
        ];

        function initializeCarousel() {
            const carousel = document.getElementById('uniCarousel');
            const dotsContainer = document.getElementById('carouselDots');
            
            // Clear existing content
            carousel.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            // Calculate number of slides (2 universities per slide)
            const totalSlides = Math.ceil(universities.length / 2);
            
            // Create slides
            for (let i = 0; i < totalSlides; i++) {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                
                const uni1 = universities[i * 2];
                const uni2 = universities[i * 2 + 1];
                
                if (uni1) {
                    const item1 = document.createElement('div');
                    item1.className = 'uni-item';
                    item1.textContent = uni1;
                    slide.appendChild(item1);
                }
                
                if (uni2) {
                    const item2 = document.createElement('div');
                    item2.className = 'uni-item';
                    item2.textContent = uni2;
                    slide.appendChild(item2);
                }
                
                carousel.appendChild(slide);
                
                // Create dot
                const dot = document.createElement('span');
                dot.className = 'carousel-dot';
                dot.onclick = () => goToSlide(i);
                dotsContainer.appendChild(dot);
            }
            
            currentSlide = 0;
            updateCarousel();
            startCarousel();
        }

        function updateCarousel() {
            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.carousel-dot');
            
            slides.forEach((slide, index) => {
                slide.classList.toggle('active', index === currentSlide);
            });
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function nextSlide() {
            const totalSlides = Math.ceil(universities.length / 2);
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel();
        }

        function goToSlide(index) {
            currentSlide = index;
            updateCarousel();
        }

        function startCarousel() {
            carouselInterval = setInterval(nextSlide, 3000); // Rotate every 3 seconds
        }

        function stopCarousel() {
            if (carouselInterval) {
                clearInterval(carouselInterval);
            }
        }

        function showToast(message) {
            const existingToast = document.querySelector('.dashboard-toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = 'dashboard-toast';
            toast.innerHTML = `<i class="fa-solid fa-triangle-exclamation"></i> ${message}`;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 400);
            }, 3000);
        }
    </script>
</body>
</html>
